<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>Thought on Vue 3 Composition API - `reactive()` considered harmful - YCM Jason</title><meta name="gridsome:hash" content="bcad2c735ff3d4752a18b8883ca65a04f58033c3"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.14"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" data-key="description" name="description" content="Jason loves solving problems. And he plays music."><link data-vue-tag="ssr" rel="icon" href="data:,"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="16x16" href="/assets/static/favicon.ce0531f.fc1e89df36d8722b28a19d261954e6a2.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="32x32" href="/assets/static/favicon.ac8d93a.fc1e89df36d8722b28a19d261954e6a2.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="96x96" href="/assets/static/favicon.b9532cc.fc1e89df36d8722b28a19d261954e6a2.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="76x76" href="/assets/static/favicon.f22e9f3.fc1e89df36d8722b28a19d261954e6a2.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="152x152" href="/assets/static/favicon.62d22cb.fc1e89df36d8722b28a19d261954e6a2.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="120x120" href="/assets/static/favicon.1539b60.fc1e89df36d8722b28a19d261954e6a2.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="167x167" href="/assets/static/favicon.dc0cdc5.fc1e89df36d8722b28a19d261954e6a2.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="180x180" href="/assets/static/favicon.7b22250.fc1e89df36d8722b28a19d261954e6a2.png"><link rel="preload" href="/assets/css/0.styles.11dff2c8.css" as="style"><link rel="preload" href="/assets/js/app.0c5f3efd.js" as="script"><link rel="preload" href="/assets/js/page--src--templates--dev-to-post-vue.e9291470.js" as="script"><link rel="prefetch" href="/assets/js/page--node-modules--gridsome--app--pages--404-vue.74af2c7c.js"><link rel="prefetch" href="/assets/js/page--src--pages--articles-vue.d44cc1df.js"><link rel="prefetch" href="/assets/js/page--src--pages--cv-vue.0b8862d8.js"><link rel="prefetch" href="/assets/js/page--src--pages--index-vue.f9ef8c1b.js"><link rel="prefetch" href="/assets/js/vendors~page--src--pages--articles-vue.2b284b11.js"><link rel="stylesheet" href="/assets/css/0.styles.11dff2c8.css"><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
  </head>
  <body >
    <div data-server-rendered="true" id="app" class="layout"><a href="https://github.com/ycmjason/ycmjason.com" aria-label="View source on GitHub" class="github-corner" data-v-03ac3be2><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true" style="fill:#70B7FD; color:#fff; position: absolute; top: 0; border: 0; right: 0;" data-v-03ac3be2><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z" data-v-03ac3be2></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" class="octo-arm" style="transform-origin: 130px 106px;" data-v-03ac3be2></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body" data-v-03ac3be2></path></svg></a><header class="header"><strong class="site-name">YCM Jason</strong><nav class="nav"><a href="/" class="nav__link active">Home</a><a href="/articles/" class="nav__link">Articles</a><a href="/cv/" class="nav__link">CV</a><a href="https://github.com/ycmjason" target="_blank" rel="noopener" class="nav__link">Github</a></nav></header><div class="markdown-body"><h1>Thought on Vue 3 Composition API - `reactive()` considered harmful</h1><div><p>Vue.js stands out from other frameworks for its intuitive reactivity. Vue 3 composition api is going to removing some limitations in Vue 2 and provide a more explicit api.</p>
<h2 id="quick-intro-to-the-composition-api"><a class="header-anchor" href="#quick-intro-to-the-composition-api">#</a> Quick Intro to the Composition API</h2>
<p>There are two ways to create reactive &quot;things&quot;:</p>
<ol>
<li><code>reactive()</code></li>
<li><code>ref()</code> / <code>computed()</code></li>
</ol>
<h3 id="introducing-reactive"><a class="header-anchor" href="#introducing-reactive">#</a> Introducing <code>reactive()</code></h3>
<p><code>reactive(obj)</code> will return a new object that looks exactly the same as <code>obj</code>, but any mutation to the new object will be tracked.</p>
<p>For example:</p>
<!--beforebegin--><div class="language-js extra-class"><!--afterbegin--><pre v-pre class="language-js"><code><span class="token comment">// template: {{ state.a }} - {{ state.b }}</span>
<span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// renders: 3 - undefined</span>

state<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">5</span>
state<span class="token punctuation">.</span>b <span class="token operator">=</span> <span class="token string">'bye'</span>
<span class="token comment">// renders: 5 - bye</span>
</code></pre>
<!--beforeend--></div><!--afterend--><p>This works exactly like <code>data</code> in Vue 2. Except we can now add new properties to them as reactivity is implemented with proxies in Vue 3.</p>
<h3 id="introducing-ref"><a class="header-anchor" href="#introducing-ref">#</a> Introducing <code>Ref</code></h3>
<p>Vue composition API introduced <code>Ref</code> which is simply an object with 1 property <code>.value</code>. We can express this using Typescript:</p>
<!--beforebegin--><div class="language-ts extra-class"><!--afterbegin--><pre v-pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">Ref</span><span class="token operator">&lt;</span><span class="token constant">A</span><span class="token operator">></span> <span class="token punctuation">{</span>
  value<span class="token operator">:</span> <span class="token constant">A</span>
<span class="token punctuation">}</span>
</code></pre>
<!--beforeend--></div><!--afterend--><p>There are two ways of creating refs:</p>
<ol>
<li><code>ref()</code></li>
</ol>
<ul>
<li><code>.value</code> can be get/set.</li>
</ul>
<ol start="2">
<li><code>computed()</code></li>
</ol>
<ul>
<li><code>.value</code> is readonly unless a setter is provided.</li>
</ul>
<p>For Example:</p>
<!--beforebegin--><div class="language-js extra-class"><!--afterbegin--><pre v-pre class="language-js"><code><span class="token keyword">const</span> countRef <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// { value: 0 }</span>
<span class="token keyword">const</span> countPlusOneRef <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> countRef<span class="token punctuation">.</span>value <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// { value: 1 }</span>
countRef<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token number">5</span>

<span class="token comment">/*
 * countRef is { value: 5 }
 * countPlusOneRef is { value: 6 } (readonly)
 */</span>
</code></pre>
<!--beforeend--></div><!--afterend--><h2 id="reactive-is-bad-ref-is-good"><a class="header-anchor" href="#reactive-is-bad-ref-is-good">#</a> <code>reactive()</code> is bad; <code>Ref</code> is good.</h2>
<p>This section of the article is purely my tentative opinion on the composition api after building a few projects with it. Do try it yourself and let me know if you agree.</p>
<p>Before using the composition api, I thought <code>reactive()</code> would be the api that everyone will end up using as it doesn't require the need to do <code>.value</code>. Surprisingly, after building a few projects with the composition api, not once have I used <code>reactive()</code> so far!</p>
<p>Here are 3 reasons why:</p>
<ol>
<li>Convenience - <code>ref()</code> allow declaration of new reactive variable on the fly.</li>
<li>Flexibility - <code>ref()</code> allow complete replacement of an object</li>
<li>Explicitness - <code>.value</code> forces you to be aware of what you are doing</li>
</ol>
<h3 id="_1-convenience"><a class="header-anchor" href="#_1-convenience">#</a> 1. Convenience</h3>
<p>The composition api is proposed to provide a way to group code with accordance to their feature in the component instead of their function in Vue. The options api groups code into <code>data</code>, <code>computed</code>, <code>methods</code>, lifecycles etc. This make it almost impossible to group code by feature. See the following image:</p>
<p><img src="https://user-images.githubusercontent.com/499550/62783026-810e6180-ba89-11e9-8774-e7771c8095d6.png" alt=""></p>
<p>Consider the following examples:</p>
<!--beforebegin--><div class="language-js extra-class"><!--afterbegin--><pre v-pre class="language-js"><code><span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  count<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  errorMessage<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> state<span class="token punctuation">.</span>count<span class="token operator">++</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token function">watch</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span>count<span class="token punctuation">,</span> <span class="token parameter">count</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">></span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    state<span class="token punctuation">.</span>errorMessage <span class="token operator">=</span> <span class="token string">'Larger than 10.'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<!--beforeend--></div><!--afterend--><p>If we use <code>reactive()</code> to store multiple properties. It is easy to fall back into the trap of grouping things by functions, not feature. You will likely be jumping around the code base to modify that reactive object. This makes the development process less smooth.</p>
<!--beforebegin--><div class="language-js extra-class"><!--afterbegin--><pre v-pre class="language-js"><code><span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> count<span class="token punctuation">.</span>value<span class="token operator">++</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> errorMessage <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
<span class="token function">watch</span><span class="token punctuation">(</span>count<span class="token punctuation">,</span> <span class="token parameter">count</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">></span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    errorMessage<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">'Larger than 10.'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<!--beforeend--></div><!--afterend--><p>On the other hand, <code>ref()</code> allow us to introduce new variables on the fly. From the example above, I only introduce variables as I need them. This makes the development process much smoother and intuitive.</p>
<h3 id="_2-flexibility"><a class="header-anchor" href="#_2-flexibility">#</a> 2. Flexibility</h3>
<p>I initially thought the sole purpose of <code>ref()</code> was to enable primitive values to be reactive. But it can become extremely handy too when using <code>ref()</code> with objects.</p>
<p>Consider:</p>
<!--beforebegin--><div class="language-js extra-class"><!--afterbegin--><pre v-pre class="language-js"><code><span class="token keyword">const</span> blogPosts <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
blogPosts<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetchBlogPosts</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<!--beforeend--></div><!--afterend--><p>If we wish to do the same with <code>reactive</code>, we need to mutate the array instead.</p>
<!--beforebegin--><div class="language-js extra-class"><!--afterbegin--><pre v-pre class="language-js"><code><span class="token keyword">const</span> blogPosts <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> post <span class="token keyword">of</span> <span class="token punctuation">(</span><span class="token keyword">await</span> <span class="token function">fetchBlogPosts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  blogPosts<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>post<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<!--beforeend--></div><!--afterend--><p>or with our &quot;beloved&quot; <code>Array.prototype.splice()</code></p>
<!--beforebegin--><div class="language-js extra-class"><!--afterbegin--><pre v-pre class="language-js"><code><span class="token keyword">const</span> blogPosts <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
blogPosts<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">(</span><span class="token keyword">await</span> <span class="token function">fetchBlogPosts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
<!--beforeend--></div><!--afterend--><p>As illustrated, <code>ref()</code> is simpler to work with in this case as you can just replace the whole array with a new one. If that doesn't convince you, imagine if the <code>blogPosts</code> needs to be paginated:</p>
<!--beforebegin--><div class="language-js extra-class"><!--afterbegin--><pre v-pre class="language-js"><code><span class="token function">watch</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span> <span class="token parameter">page</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// remove everything from `blogPosts`</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>blogPosts<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    blogPosts<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  
  <span class="token comment">// add everything from new page</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> post <span class="token keyword">of</span> <span class="token punctuation">(</span><span class="token keyword">await</span> <span class="token function">fetchBlogPostsOnPage</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    blogPosts<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>post<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<!--beforeend--></div><!--afterend--><p>or with our best friend <code>splice</code></p>
<!--beforebegin--><div class="language-js extra-class"><!--afterbegin--><pre v-pre class="language-js"><code><span class="token function">watch</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span> <span class="token parameter">page</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  blogPosts<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> blogPosts<span class="token punctuation">.</span>length<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">(</span><span class="token keyword">await</span> <span class="token function">fetchBlogPostsOnPage</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<!--beforeend--></div><!--afterend--><p>But if we use <code>ref()</code></p>
<!--beforebegin--><div class="language-js extra-class"><!--afterbegin--><pre v-pre class="language-js"><code><span class="token function">watch</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span> <span class="token parameter">page</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  blogPosts<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetchBlogPostsOnPage</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<!--beforeend--></div><!--afterend--><p>It is much flexible to work with.</p>
<h3 id="_3-explicitness"><a class="header-anchor" href="#_3-explicitness">#</a> 3. Explicitness</h3>
<p><code>reactive()</code> returns an object that we will interact with the same we interact with other non-reactive object. This is cool, but can become confusing in practise if we have deal with other non-reactive objects.</p>
<!--beforebegin--><div class="language-js extra-class"><!--afterbegin--><pre v-pre class="language-js"><code><span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>human<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">'Jason'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>partner<span class="token punctuation">.</span>age<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      partner<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">30</span> 
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<!--beforeend--></div><!--afterend--><p>We cannot really tell if <code>human</code> or <code>partner</code> is reactive. But if we ditch using <code>reactive()</code> and consistently utilise <code>ref()</code>, we won't have the same problem.</p>
<p><code>.value</code> may seem wordy at first; but it helps reminding us that we are dealing with reactivity.</p>
<!--beforebegin--><div class="language-js extra-class"><!--afterbegin--><pre v-pre class="language-js"><code><span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>human<span class="token punctuation">.</span>value<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">'Jason'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>partner<span class="token punctuation">.</span>age<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      partner<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">30</span> 
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<!--beforeend--></div><!--afterend--><p>It becomes obvious now that <code>human</code> is reactive but not <code>partner</code>.</p>
<h2 id="conclusion"><a class="header-anchor" href="#conclusion">#</a> Conclusion</h2>
<p>The above observations and opinions are totally tentative. What do you think? Do you agree <code>ref()</code> is going to dominate in Vue 3? Or do you think <code>reactive()</code> will be preferred?</p>
<p>Let me know in the comments! I would love to hear more thoughts!</p>
</div></div><footer>Copyright © 2020 Jason Yu</footer></div>
    <script>window.__INITIAL_STATE__={"data":{"post":{"title":"Thought on Vue 3 Composition API - `reactive()` considered harmful","content":"\u003Cp\u003EVue.js stands out from other frameworks for its intuitive reactivity. Vue 3 composition api is going to removing some limitations in Vue 2 and provide a more explicit api.\u003C\u002Fp\u003E\n\u003Ch2 id=\"quick-intro-to-the-composition-api\"\u003E\u003Ca class=\"header-anchor\" href=\"#quick-intro-to-the-composition-api\"\u003E#\u003C\u002Fa\u003E Quick Intro to the Composition API\u003C\u002Fh2\u003E\n\u003Cp\u003EThere are two ways to create reactive &quot;things&quot;:\u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003E\u003Ccode\u003Ereactive()\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003Eref()\u003C\u002Fcode\u003E \u002F \u003Ccode\u003Ecomputed()\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Ch3 id=\"introducing-reactive\"\u003E\u003Ca class=\"header-anchor\" href=\"#introducing-reactive\"\u003E#\u003C\u002Fa\u003E Introducing \u003Ccode\u003Ereactive()\u003C\u002Fcode\u003E\u003C\u002Fh3\u003E\n\u003Cp\u003E\u003Ccode\u003Ereactive(obj)\u003C\u002Fcode\u003E will return a new object that looks exactly the same as \u003Ccode\u003Eobj\u003C\u002Fcode\u003E, but any mutation to the new object will be tracked.\u003C\u002Fp\u003E\n\u003Cp\u003EFor example:\u003C\u002Fp\u003E\n\u003C!--beforebegin--\u003E\u003Cdiv class=\"language-js extra-class\"\u003E\u003C!--afterbegin--\u003E\u003Cpre v-pre class=\"language-js\"\u003E\u003Ccode\u003E\u003Cspan class=\"token comment\"\u003E\u002F\u002F template: {{ state.a }} - {{ state.b }}\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E state \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Ereactive\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E a\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E3\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token comment\"\u003E\u002F\u002F renders: 3 - undefined\u003C\u002Fspan\u003E\n\nstate\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Ea \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E5\u003C\u002Fspan\u003E\nstate\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Eb \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E'bye'\u003C\u002Fspan\u003E\n\u003Cspan class=\"token comment\"\u003E\u002F\u002F renders: 5 - bye\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003C!--beforeend--\u003E\u003C\u002Fdiv\u003E\u003C!--afterend--\u003E\u003Cp\u003EThis works exactly like \u003Ccode\u003Edata\u003C\u002Fcode\u003E in Vue 2. Except we can now add new properties to them as reactivity is implemented with proxies in Vue 3.\u003C\u002Fp\u003E\n\u003Ch3 id=\"introducing-ref\"\u003E\u003Ca class=\"header-anchor\" href=\"#introducing-ref\"\u003E#\u003C\u002Fa\u003E Introducing \u003Ccode\u003ERef\u003C\u002Fcode\u003E\u003C\u002Fh3\u003E\n\u003Cp\u003EVue composition API introduced \u003Ccode\u003ERef\u003C\u002Fcode\u003E which is simply an object with 1 property \u003Ccode\u003E.value\u003C\u002Fcode\u003E. We can express this using Typescript:\u003C\u002Fp\u003E\n\u003C!--beforebegin--\u003E\u003Cdiv class=\"language-ts extra-class\"\u003E\u003C!--afterbegin--\u003E\u003Cpre v-pre class=\"language-ts\"\u003E\u003Ccode\u003E\u003Cspan class=\"token keyword\"\u003Einterface\u003C\u002Fspan\u003E \u003Cspan class=\"token class-name\"\u003ERef\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"token constant\"\u003EA\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  value\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token constant\"\u003EA\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003C!--beforeend--\u003E\u003C\u002Fdiv\u003E\u003C!--afterend--\u003E\u003Cp\u003EThere are two ways of creating refs:\u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003E\u003Ccode\u003Eref()\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ccode\u003E.value\u003C\u002Fcode\u003E can be get\u002Fset.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Col start=\"2\"\u003E\n\u003Cli\u003E\u003Ccode\u003Ecomputed()\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ccode\u003E.value\u003C\u002Fcode\u003E is readonly unless a setter is provided.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003EFor Example:\u003C\u002Fp\u003E\n\u003C!--beforebegin--\u003E\u003Cdiv class=\"language-js extra-class\"\u003E\u003C!--afterbegin--\u003E\u003Cpre v-pre class=\"language-js\"\u003E\u003Ccode\u003E\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E countRef \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Eref\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token comment\"\u003E\u002F\u002F { value: 0 }\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E countPlusOneRef \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Ecomputed\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E countRef\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Evalue \u003Cspan class=\"token operator\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token comment\"\u003E\u002F\u002F { value: 1 }\u003C\u002Fspan\u003E\ncountRef\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Evalue \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E5\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token comment\"\u003E\u002F*\n * countRef is { value: 5 }\n * countPlusOneRef is { value: 6 } (readonly)\n *\u002F\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003C!--beforeend--\u003E\u003C\u002Fdiv\u003E\u003C!--afterend--\u003E\u003Ch2 id=\"reactive-is-bad-ref-is-good\"\u003E\u003Ca class=\"header-anchor\" href=\"#reactive-is-bad-ref-is-good\"\u003E#\u003C\u002Fa\u003E \u003Ccode\u003Ereactive()\u003C\u002Fcode\u003E is bad; \u003Ccode\u003ERef\u003C\u002Fcode\u003E is good.\u003C\u002Fh2\u003E\n\u003Cp\u003EThis section of the article is purely my tentative opinion on the composition api after building a few projects with it. Do try it yourself and let me know if you agree.\u003C\u002Fp\u003E\n\u003Cp\u003EBefore using the composition api, I thought \u003Ccode\u003Ereactive()\u003C\u002Fcode\u003E would be the api that everyone will end up using as it doesn't require the need to do \u003Ccode\u003E.value\u003C\u002Fcode\u003E. Surprisingly, after building a few projects with the composition api, not once have I used \u003Ccode\u003Ereactive()\u003C\u002Fcode\u003E so far!\u003C\u002Fp\u003E\n\u003Cp\u003EHere are 3 reasons why:\u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003EConvenience - \u003Ccode\u003Eref()\u003C\u002Fcode\u003E allow declaration of new reactive variable on the fly.\u003C\u002Fli\u003E\n\u003Cli\u003EFlexibility - \u003Ccode\u003Eref()\u003C\u002Fcode\u003E allow complete replacement of an object\u003C\u002Fli\u003E\n\u003Cli\u003EExplicitness - \u003Ccode\u003E.value\u003C\u002Fcode\u003E forces you to be aware of what you are doing\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Ch3 id=\"_1-convenience\"\u003E\u003Ca class=\"header-anchor\" href=\"#_1-convenience\"\u003E#\u003C\u002Fa\u003E 1. Convenience\u003C\u002Fh3\u003E\n\u003Cp\u003EThe composition api is proposed to provide a way to group code with accordance to their feature in the component instead of their function in Vue. The options api groups code into \u003Ccode\u003Edata\u003C\u002Fcode\u003E, \u003Ccode\u003Ecomputed\u003C\u002Fcode\u003E, \u003Ccode\u003Emethods\u003C\u002Fcode\u003E, lifecycles etc. This make it almost impossible to group code by feature. See the following image:\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fuser-images.githubusercontent.com\u002F499550\u002F62783026-810e6180-ba89-11e9-8774-e7771c8095d6.png\" alt=\"\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EConsider the following examples:\u003C\u002Fp\u003E\n\u003C!--beforebegin--\u003E\u003Cdiv class=\"language-js extra-class\"\u003E\u003C!--afterbegin--\u003E\u003Cpre v-pre class=\"language-js\"\u003E\u003Ccode\u003E\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E state \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Ereactive\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  count\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n  errorMessage\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Enull\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token function\"\u003EsetTimeout\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E state\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Ecount\u003Cspan class=\"token operator\"\u003E++\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E1000\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token function\"\u003Ewatch\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Estate\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Ecount\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token parameter\"\u003Ecount\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecount \u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E10\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    state\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EerrorMessage \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E'Larger than 10.'\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003C!--beforeend--\u003E\u003C\u002Fdiv\u003E\u003C!--afterend--\u003E\u003Cp\u003EIf we use \u003Ccode\u003Ereactive()\u003C\u002Fcode\u003E to store multiple properties. It is easy to fall back into the trap of grouping things by functions, not feature. You will likely be jumping around the code base to modify that reactive object. This makes the development process less smooth.\u003C\u002Fp\u003E\n\u003C!--beforebegin--\u003E\u003Cdiv class=\"language-js extra-class\"\u003E\u003C!--afterbegin--\u003E\u003Cpre v-pre class=\"language-js\"\u003E\u003Ccode\u003E\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E count \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Eref\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token function\"\u003EsetTimeout\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E count\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Evalue\u003Cspan class=\"token operator\"\u003E++\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E1000\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E errorMessage \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Eref\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token keyword\"\u003Enull\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token function\"\u003Ewatch\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecount\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token parameter\"\u003Ecount\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecount \u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E10\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    errorMessage\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Evalue \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E'Larger than 10.'\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003C!--beforeend--\u003E\u003C\u002Fdiv\u003E\u003C!--afterend--\u003E\u003Cp\u003EOn the other hand, \u003Ccode\u003Eref()\u003C\u002Fcode\u003E allow us to introduce new variables on the fly. From the example above, I only introduce variables as I need them. This makes the development process much smoother and intuitive.\u003C\u002Fp\u003E\n\u003Ch3 id=\"_2-flexibility\"\u003E\u003Ca class=\"header-anchor\" href=\"#_2-flexibility\"\u003E#\u003C\u002Fa\u003E 2. Flexibility\u003C\u002Fh3\u003E\n\u003Cp\u003EI initially thought the sole purpose of \u003Ccode\u003Eref()\u003C\u002Fcode\u003E was to enable primitive values to be reactive. But it can become extremely handy too when using \u003Ccode\u003Eref()\u003C\u002Fcode\u003E with objects.\u003C\u002Fp\u003E\n\u003Cp\u003EConsider:\u003C\u002Fp\u003E\n\u003C!--beforebegin--\u003E\u003Cdiv class=\"language-js extra-class\"\u003E\u003C!--afterbegin--\u003E\u003Cpre v-pre class=\"language-js\"\u003E\u003Ccode\u003E\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E blogPosts \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Eref\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\nblogPosts\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Evalue \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Eawait\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EfetchBlogPosts\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003C!--beforeend--\u003E\u003C\u002Fdiv\u003E\u003C!--afterend--\u003E\u003Cp\u003EIf we wish to do the same with \u003Ccode\u003Ereactive\u003C\u002Fcode\u003E, we need to mutate the array instead.\u003C\u002Fp\u003E\n\u003C!--beforebegin--\u003E\u003Cdiv class=\"language-js extra-class\"\u003E\u003C!--afterbegin--\u003E\u003Cpre v-pre class=\"language-js\"\u003E\u003Ccode\u003E\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E blogPosts \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Ereactive\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Efor\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E post \u003Cspan class=\"token keyword\"\u003Eof\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token keyword\"\u003Eawait\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EfetchBlogPosts\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  blogPosts\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Epush\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Epost\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003C!--beforeend--\u003E\u003C\u002Fdiv\u003E\u003C!--afterend--\u003E\u003Cp\u003Eor with our &quot;beloved&quot; \u003Ccode\u003EArray.prototype.splice()\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003C!--beforebegin--\u003E\u003Cdiv class=\"language-js extra-class\"\u003E\u003C!--afterbegin--\u003E\u003Cpre v-pre class=\"language-js\"\u003E\u003Ccode\u003E\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E blogPosts \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Ereactive\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\nblogPosts\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Esplice\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E...\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token keyword\"\u003Eawait\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EfetchBlogPosts\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003C!--beforeend--\u003E\u003C\u002Fdiv\u003E\u003C!--afterend--\u003E\u003Cp\u003EAs illustrated, \u003Ccode\u003Eref()\u003C\u002Fcode\u003E is simpler to work with in this case as you can just replace the whole array with a new one. If that doesn't convince you, imagine if the \u003Ccode\u003EblogPosts\u003C\u002Fcode\u003E needs to be paginated:\u003C\u002Fp\u003E\n\u003C!--beforebegin--\u003E\u003Cdiv class=\"language-js extra-class\"\u003E\u003C!--afterbegin--\u003E\u003Cpre v-pre class=\"language-js\"\u003E\u003Ccode\u003E\u003Cspan class=\"token function\"\u003Ewatch\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Epage\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token parameter\"\u003Epage\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token comment\"\u003E\u002F\u002F remove everything from `blogPosts`\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Ewhile\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EblogPosts\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Elength \u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    blogPosts\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Epop\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n  \n  \u003Cspan class=\"token comment\"\u003E\u002F\u002F add everything from new page\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Efor\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E post \u003Cspan class=\"token keyword\"\u003Eof\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token keyword\"\u003Eawait\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EfetchBlogPostsOnPage\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Epage\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    blogPosts\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Epush\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Epost\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003C!--beforeend--\u003E\u003C\u002Fdiv\u003E\u003C!--afterend--\u003E\u003Cp\u003Eor with our best friend \u003Ccode\u003Esplice\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003C!--beforebegin--\u003E\u003Cdiv class=\"language-js extra-class\"\u003E\u003C!--afterbegin--\u003E\u003Cpre v-pre class=\"language-js\"\u003E\u003Ccode\u003E\u003Cspan class=\"token function\"\u003Ewatch\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Epage\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token parameter\"\u003Epage\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  blogPosts\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Esplice\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E blogPosts\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Elength\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E...\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token keyword\"\u003Eawait\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EfetchBlogPostsOnPage\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Epage\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003C!--beforeend--\u003E\u003C\u002Fdiv\u003E\u003C!--afterend--\u003E\u003Cp\u003EBut if we use \u003Ccode\u003Eref()\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003C!--beforebegin--\u003E\u003Cdiv class=\"language-js extra-class\"\u003E\u003C!--afterbegin--\u003E\u003Cpre v-pre class=\"language-js\"\u003E\u003Ccode\u003E\u003Cspan class=\"token function\"\u003Ewatch\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Epage\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token parameter\"\u003Epage\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  blogPosts\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Evalue \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Eawait\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EfetchBlogPostsOnPage\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Epage\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003C!--beforeend--\u003E\u003C\u002Fdiv\u003E\u003C!--afterend--\u003E\u003Cp\u003EIt is much flexible to work with.\u003C\u002Fp\u003E\n\u003Ch3 id=\"_3-explicitness\"\u003E\u003Ca class=\"header-anchor\" href=\"#_3-explicitness\"\u003E#\u003C\u002Fa\u003E 3. Explicitness\u003C\u002Fh3\u003E\n\u003Cp\u003E\u003Ccode\u003Ereactive()\u003C\u002Fcode\u003E returns an object that we will interact with the same we interact with other non-reactive object. This is cool, but can become confusing in practise if we have deal with other non-reactive objects.\u003C\u002Fp\u003E\n\u003C!--beforebegin--\u003E\u003Cdiv class=\"language-js extra-class\"\u003E\u003C!--afterbegin--\u003E\u003Cpre v-pre class=\"language-js\"\u003E\u003Ccode\u003E\u003Cspan class=\"token function\"\u003Ewatch\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ehuman\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Ename \u003Cspan class=\"token operator\"\u003E===\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E'Jason'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E!\u003C\u002Fspan\u003Epartner\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Eage\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n      partner\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Eage \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E30\u003C\u002Fspan\u003E \n    \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003C!--beforeend--\u003E\u003C\u002Fdiv\u003E\u003C!--afterend--\u003E\u003Cp\u003EWe cannot really tell if \u003Ccode\u003Ehuman\u003C\u002Fcode\u003E or \u003Ccode\u003Epartner\u003C\u002Fcode\u003E is reactive. But if we ditch using \u003Ccode\u003Ereactive()\u003C\u002Fcode\u003E and consistently utilise \u003Ccode\u003Eref()\u003C\u002Fcode\u003E, we won't have the same problem.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003E.value\u003C\u002Fcode\u003E may seem wordy at first; but it helps reminding us that we are dealing with reactivity.\u003C\u002Fp\u003E\n\u003C!--beforebegin--\u003E\u003Cdiv class=\"language-js extra-class\"\u003E\u003C!--afterbegin--\u003E\u003Cpre v-pre class=\"language-js\"\u003E\u003Ccode\u003E\u003Cspan class=\"token function\"\u003Ewatch\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ehuman\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Evalue\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Ename \u003Cspan class=\"token operator\"\u003E===\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E'Jason'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E!\u003C\u002Fspan\u003Epartner\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Eage\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n      partner\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Eage \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E30\u003C\u002Fspan\u003E \n    \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003C!--beforeend--\u003E\u003C\u002Fdiv\u003E\u003C!--afterend--\u003E\u003Cp\u003EIt becomes obvious now that \u003Ccode\u003Ehuman\u003C\u002Fcode\u003E is reactive but not \u003Ccode\u003Epartner\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\n\u003Ch2 id=\"conclusion\"\u003E\u003Ca class=\"header-anchor\" href=\"#conclusion\"\u003E#\u003C\u002Fa\u003E Conclusion\u003C\u002Fh2\u003E\n\u003Cp\u003EThe above observations and opinions are totally tentative. What do you think? Do you agree \u003Ccode\u003Eref()\u003C\u002Fcode\u003E is going to dominate in Vue 3? Or do you think \u003Ccode\u003Ereactive()\u003C\u002Fcode\u003E will be preferred?\u003C\u002Fp\u003E\n\u003Cp\u003ELet me know in the comments! I would love to hear more thoughts!\u003C\u002Fp\u003E\n"}},"context":{}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script><script src="/assets/js/app.0c5f3efd.js" defer></script><script src="/assets/js/page--src--templates--dev-to-post-vue.e9291470.js" defer></script>
  </body>
</html>
